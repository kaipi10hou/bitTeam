<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.community">
	<resultMap id="communityResult" type="communityVO">
		<result property="c_no" column="c_no" />
		<result property="c_title" column="c_title" />
		<result property="c_content" column="c_content" />
		<result property="c_imageFileName" column="c_imageFileName" />
		<result property="c_date" column="c_date" />
		<result property="id" column="id" />	
	</resultMap>
	

<select id="selectAllCommunityList" resultMap="communityResult"   >
    <![CDATA[
   		  SELECT c_no, c_title, c_content, c_imageFileName, c_date, id
          from c_board	
    ]]>
  </select>
  	
  	<!--단일이미지 추가  -->
  	<insert id="insertNewCommunity"  parameterType="java.util.Map">
			INSERT into c_board( c_no, c_title, c_content, c_imageFileName, id)
			VALUES(#{c_no}, #{c_title}, #{c_content}, #{c_imageFileName}, #{id})
	</insert>
	
  	<select id="selectNewC_no" resultType="int"  >
		<![CDATA[
			SELECT  nvl(max(c_no), 0) + 1 from c_board		
		]]>
	</select>
	
 	 <select id="selectCommunity" resultType="communityVO"   parameterType="int">
    <![CDATA[
    	SELECT * from c_board
        where c_no = #{c_no}	
    ]]>
 	 </select>
  
  	<update id="updateCommunity"  parameterType="java.util.Map">
		update c_board
		set c_title=#{c_title},	 
		c_content=#{c_content}
		where c_no=#{c_no}	
	</update>
	
	<delete id="deleteCommunity"  parameterType="int">
   		  <![CDATA[
   		 delete from c_board
      	 where c_no = #{c_no}
          ]]>  
  	</delete>
  	
  	 <select id="selectNewImageFileNO" resultType="int"  >
    <![CDATA[
      SELECT  nvl(max(c_imageFileNO),0) from c_imageFile		
    ]]>
  </select>
	
<!--  
  <select  id="selectImageFileList" resultMap="imgResult" parameterType="int">
    <![CDATA[
      SELECT * from c_imageFile
      where c_no=#{c_no}	
    ]]>
  </select> 
-->	


</mapper>